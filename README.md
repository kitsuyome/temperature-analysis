# Анализ температур с помощью исторических данных, API OpenWeather и Streamlit

## Цель

Этот проект предоставляет удобный инструмент для анализа температурных данных с использованием Streamlit. С помощью приложения пользователь может:

- Загружать и анализировать исторические данные о температуре
- Выбирать город для изучения сезонных профилей, аномалий и трендов
- Сравнивать текущую температуру с историческими нормами, используя API OpenWeatherMap

Проект доступен по ссылке: https://temperature-analytics.streamlit.app/

## Структура проекта

### main.ipynb

Демонстрация методов и реализации анализа температур, включая:

- Анализ данных и построение сезонных профилей
- Выявление аномалий температуры
- Сравнение различных функций и методов

### scripts.py

Основные функции для анализа данных и работы с API:

- `analysis`: выполняет сезонный анализ и определяет тренды для указанного города
- `current_temp`: получает текущую температуру из OpenWeatherMap API и сравнивает с историческими данными
- `async_current_temp`: асинхронная версия функции current_temp
  
### utils.py

Вспомогательные функции для тестирования производительности:

- `test_sync_analysis()`: оценивает производительность синхронного анализа
- `test_parallel_analysis`: оценивает производительность анализа с распараллеливанием
- `test_async_temp()`: тестирует асинхронные вызовы API для получения текущей температуры
- `test_sync_temp()`: тестирует синхронные вызовы API для получения текущей температуры

## Установка

Клонируйте репозиторий и установите зависимости:

```
git clone https://github.com/kitsuyome/temperature-analysis
cd temperature-analysis
pip install -r requirements.txt
```
## Использование приложения Streamlit

1. **Загрузка исторических данных:**
   - На странице "Главная" загрузите CSV-файл с историческими данными о температуре, где каждая запись должна содержать дату, город и температуру.
   - Введите API-ключ OpenWeatherMap, чтобы приложение могло отображать актуальную температуру.

2. **Выбор города:**
   - На странице "Анализ" выберите интересующий вас город из выпадающего списка. Список формируется на основе данных, загруженных вами.

3. **Сезонные профили:**
   - На странице "Анализ" в разделе "Обзор" выберите сезон (Winter, Spring, Summer, Autumn).
   - Приложение покажет минимальную, среднюю и максимальную температуру в выбранном городе за указанный сезон.

4. **Анализ данных и графики:**
   - На странице "Анализ" → "Графики" исследуйте данные о температуре через разнообразные визуализации:
     - Временные ряды температур.
     - Сезонные профили с расчетом среднего значения и стандартного отклонения.
     - Аномалии температур, которые отклоняются от среднего значения.
     - Гистограммы, тепловые карты плотности и разбросы.

5. **Сравнение городов:**
   - На странице "Сравнение" выберите один или несколько городов для сравнения.
   - Исследуйте графики временных рядов температур, их средние значения и аномалии по выбранным городам.

6. **Рекомендация для отдыха:**
   - На странице "Куда вам слетать отдохнуть?" выберите желаемый сезон и диапазон температур.
   - Приложение подберет город, соответствующий этим критериям, на основе исторических данных.
   - С помощью OpenWeatherMap приложение покажет текущую температуру в предложенном городе.

### Пример данных

Ваши данные должны быть в следующем формате:

| city       | timestamp           | temperature | season |
|------------|---------------------|-------------|--------|
| New York   | 2023-01-01 00:00:00 | -3.5        | Winter |
| Los Angeles| 2023-07-01 00:00:00 | 25.0        | Summer |

### Ключ

Для использования и тестирования вам необходим API Key от https://openweathermap.org/api

## Лицензия

Этот проект лицензирован под [MIT License](LICENSE).
